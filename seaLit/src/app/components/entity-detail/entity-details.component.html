<div class="d-flex justify-content-center">
  <div class="spinner-border" role="status">
      <span class="sr-only" id="loading"></span>
      <p id="waitmsg" *ngIf="isEmploymentWorkers">Please wait...Reading large amounts of data!</p>
  </div>
</div>
<div class="record-container" *ngIf="selectedTable">
  <h3 class="title">{{sourceName}}: {{recordTitle}} <a *ngIf="idExists" class='title'
      href="https://isl.ics.forth.gr/FastCatTeam/templates/{{sourceId}}.html?name={{Id}}&templateTitle={{sourceName}}&mode=teamView"
      target="_blank" rel="noopener"
      >(FastCat Record)</a></h3>
  <div class="nocol-grid">
    <div class="nontable" >
      <h3 class="notable-title">{{title}} </h3>
      <p *ngFor="let item of nonLitsInfo">
        <b>{{item.key}}</b> : {{item.value}}
      </p>
    </div>
  </div>

  <div class="tables">
    <div class="table" *ngFor="let tableg of tables; index as i;">
      <div class="title-download-div">
        <div class="title-div">
          <h3 class="table-title" (click)="show(i)">{{keysList[i]}}</h3>
        </div>
        <div class="chart-div">
          <button class="chart-but" mat-button [matMenuTriggerFor]="columns" color="success" title="Data Visualization"><mat-icon>bar_chart</mat-icon></button>
          <mat-menu #columns="matMenu">
            <button *ngFor="let column of columnTitles[i]" mat-menu-item (click)="calculateStats(tableg,column,i)">{{column}}</button>
          </mat-menu>
        </div>
        <div class="download-div">
          <button class="download-but" mat-button title="Download CSV file" (click)="onBtnExport(tableg)"><mat-icon id="downicon">download</mat-icon></button>
        </div>
      </div>
        <ag-grid-angular oncontextmenu="return false;"
          [id]="i"
          [style]="tableHeights[i]"
          class="ag-theme-alpine"
          [rowData]="tableg"
          [columnDefs]="tablesTitles[i]"
          [defaultColDef]="defaultColDef"
          [pagination]="true"
          [paginationPageSize]=9
          [gridOptions]="gridOptions">
        </ag-grid-angular>

        <div style="display: block;" *ngIf="chartOption[i]">
          <canvas baseChart
            id = "chart{{i}}"
            [data]="barChartDataArray[i]"
            [options]="barChartOptions"
            [plugins]="barChartPlugins"
            [type]="barChartType">
          </canvas>
          <div class="reset-div">
            <button class="reset-button" mat-stroked-button (click)="resetZoom(i)" title="Reset Zoom">
              Reset Zoom
            </button>
            <button class="reset-button" mat-stroked-button (click)="downloadChartData(i)" title="Download Chart data">
              <mat-icon>download</mat-icon>
            </button>
          </div>
        </div>
    </div>


  </div>
</div>

